<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title> City Construction - Hackerrank CodeSprint 11 - VietCodes </title>
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu+Mono">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/all.css">
    
    <!--script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-2911647956237293",
    enable_page_level_ads: true
  });
</script-->

    
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML' defer></script>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112397632-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-112397632-1');
    </script>
  </head>
  <body>
    <p class="brand">
<span class="keyword">let</span> menu <span class="op">=</span>
[<span class="string">"<a href="/">Home</a>"</span>,
<span class="string">"<a href="/algorithms">Algorithms</a>"</span>,
<span class="string">"<a href="/codehub">CodeHub</a>"</span>,
<span class="string">"<a href="/tools">Tools</a>"</span>];
</p>

    <div class="container">
  <div class="row">
    <div class="col-md-12" style="padding: 1px">
      <div class="card window" id="overview">
  <div class="card-header window-header">
    <img class="btn-close" src="/img/close.svg"><img class="btn-minimize" src="/img/minimize.svg"><img class="btn-maximize" src="/img/maximize.svg">
    <span class="title">Overview</span>
  </div>
  <div class="card-body window-body content">

        <h3 id="city-construction---hackerrank-codesprint-11">City Construction - Hackerrank CodeSprint 11</h3>
<ul>
  <li>Đề bài: <a href="https://www.hackerrank.com/contests/world-codesprint-11/challenges/hackerland" target="blank">https://www.hackerrank.com/contests/world-codesprint-11/challenges/hackerland</a></li>
  <li>Keywords: bitset, dag, graph, tarjan</li>
  <li>Tài liệu:
    <ul>
      <li><a href="https://en.wikipedia.org/wiki/Tarjan's_strongly_connected_components_algorithm" target="blank">https://en.wikipedia.org/wiki/Tarjan’s_strongly_connected_components_algorithm</a></li>
      <li><a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph" target="blank">https://en.wikipedia.org/wiki/Directed_acyclic_graph</a></li>
      <li><a href="http://www.cplusplus.com/reference/bitset/bitset/" target="blank">http://www.cplusplus.com/reference/bitset/bitset/</a></li>
    </ul>
  </li>
  <li>Ngôn ngữ: C++11</li>
</ul>

        </div>
</div>


      
        <div class="card window" id="explanation.md">
  <div class="card-header window-header">
    <img class="btn-close" src="/img/close.svg"><img class="btn-minimize" src="/img/minimize.svg"><img class="btn-maximize" src="/img/maximize.svg">
    <span class="title">explanation.md</span>
  </div>
  <div class="card-body window-body content">

          <h3 id="tóm-tắt-đề">Tóm tắt đề</h3>

<p>Cho đồ thị có hướng N đỉnh, M cạnh, các đỉnh đánh số từ 1 đến N và Q truy vấn. Mỗi truy vấn có dạng như sau:</p>
<ul>
  <li>1 x d: Thêm một đỉnh N+1 vào đồ thị
    <ul>
      <li>Nếu d = 1, thêm cạnh nối từ N+1 đến x</li>
      <li>Nếu d = 0, thêm cạnh nối từ x đến N+1</li>
    </ul>
  </li>
  <li>2 x y: In Yes nếu có đường đi từ x đến y, No trong trường hợp ngược lại.
Giới hạn:</li>
  <li>
    <script type="math/tex; mode=display">% <![CDATA[
1 <= N, M <= 5 \times 10^4 %]]></script>
  </li>
  <li>
    <script type="math/tex; mode=display">% <![CDATA[
1 <= Q <= 10^5 %]]></script>
  </li>
  <li>Số đỉnh của đồ thị luôn không vượt quá <script type="math/tex">10^4</script></li>
</ul>

<h3 id="cách-giải">Cách giải</h3>

<ul>
  <li>Đọc hết các truy vấn, thêm tất cả các cạnh trong truy vấn vào đồ thị đã cho.</li>
  <li>Tạo đồ thị mới bằng cách gộp tất cả những cạnh nằm trong cùng một thành phần liên thông lại với nhau. Đồ thị mới có dạng DAG (đồ thị có hướng không chu trình).</li>
  <li>Với mỗi đỉnh u trong DAG, ta tính bitset <script type="math/tex">dp[u]</script> với ý nghĩa <script type="math/tex">dp[u][v] = 1</script> nếu có đường đi từ đỉnh u đến đỉnh v.</li>
  <li>Với mỗi truy vấn x y, tìm 2 đỉnh tương ứng u v trong DAG, xuất Yes nếu <script type="math/tex">dp[u][v] = 1</script>.</li>
</ul>

          </div>
</div>

      

      
        <div class="card window" id="main.cpp">
  <div class="card-header window-header">
    <img class="btn-close" src="/img/close.svg"><img class="btn-minimize" src="/img/minimize.svg"><img class="btn-maximize" src="/img/maximize.svg">
    <span class="title">main.cpp</span>
  </div>
  <div class="card-body window-body content">

          <a href="https://github.com/vietcodes/vietcodes.github.io/blob/master/code/4/main.cpp">Open in Github <i class="fa fa-lg fa-github"></i></a>
          &bull;
          <a href="main.cpp">Download <i class="fa fa-lg fa-download"></i></a>
          <div class="language-c++ selectable-code highlighter-rouge" contenteditable="true"><pre class="highlight"><code><span class="cp">#include &lt;bitset&gt;
#include &lt;vector&gt;
#include &lt;cstdio&gt;
#include &lt;memory&gt;
#include &lt;limits&gt;
#include &lt;algorithm&gt;
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">edge</span> <span class="p">{</span> <span class="kt">int</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">;</span> <span class="p">};</span>
<span class="k">typedef</span> <span class="n">vector</span><span class="o">&lt;</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">dsk</span><span class="p">;</span>
<span class="k">typedef</span> <span class="n">vector</span><span class="o">&lt;</span> <span class="n">bitset</span><span class="o">&lt;</span><span class="mi">50000</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">bset</span><span class="p">;</span>

<span class="kr">inline</span> <span class="kt">void</span> <span class="nf">minimize</span><span class="p">(</span><span class="kt">int</span> <span class="o">&amp;</span><span class="n">u</span><span class="p">,</span> <span class="kt">int</span> <span class="n">v</span><span class="p">)</span> <span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="n">u</span> <span class="o">&gt;</span> <span class="n">v</span><span class="p">)</span> <span class="n">u</span> <span class="o">=</span> <span class="n">v</span><span class="p">;</span> <span class="p">}</span>

<span class="kt">void</span> <span class="nf">tj</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">num</span><span class="p">,</span> <span class="k">const</span> <span class="n">dsk</span> <span class="o">&amp;</span><span class="n">ke</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">map</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">idx</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">low</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">index</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">stack</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">idx</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="n">idx</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span><span class="o">++</span><span class="p">;</span>
    <span class="n">stack</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">j</span><span class="o">:</span> <span class="n">ke</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">idx</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">tj</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">ke</span><span class="p">,</span> <span class="n">map</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">stack</span><span class="p">);</span>
            <span class="n">minimize</span><span class="p">(</span><span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">low</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">map</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">minimize</span><span class="p">(</span><span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">idx</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">idx</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">stack</span><span class="p">.</span><span class="n">back</span><span class="p">();</span> <span class="n">stack</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
            <span class="n">map</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">num</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">j</span> <span class="o">!=</span> <span class="n">i</span><span class="p">);</span>
        <span class="n">num</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">dsk</span><span class="o">*</span> <span class="nf">dag</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">edge</span><span class="o">&gt;</span> <span class="o">&amp;&amp;</span><span class="n">canh</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">map</span><span class="p">,</span> <span class="n">bset</span> <span class="o">&amp;</span><span class="n">set</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">map</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">idx</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">low</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">numeric_limits</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">max</span><span class="p">());</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">stack</span><span class="p">;</span> <span class="n">stack</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    <span class="n">dsk</span> <span class="n">ke</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span><span class="n">x</span><span class="o">:</span> <span class="n">canh</span><span class="p">)</span> <span class="n">ke</span><span class="p">[</span><span class="n">x</span><span class="p">.</span><span class="n">u</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">v</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">tj</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">ke</span><span class="p">,</span> <span class="n">map</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">stack</span><span class="p">);</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">num</span><span class="p">;</span>
    <span class="n">set</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">set</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="k">auto</span> <span class="n">res</span> <span class="o">=</span> <span class="k">new</span> <span class="n">dsk</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span><span class="n">x</span><span class="o">:</span> <span class="n">canh</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">map</span><span class="p">[</span><span class="n">x</span><span class="p">.</span><span class="n">u</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="n">map</span><span class="p">[</span><span class="n">x</span><span class="p">.</span><span class="n">v</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">set</span><span class="p">[</span><span class="n">a</span><span class="p">].</span><span class="n">test</span><span class="p">(</span><span class="n">b</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">set</span><span class="p">[</span><span class="n">a</span><span class="p">].</span><span class="n">set</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
            <span class="p">(</span><span class="o">*</span><span class="n">res</span><span class="p">)[</span><span class="n">a</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">res</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;&amp;</span> <span class="n">visited</span><span class="p">,</span> <span class="n">bset</span> <span class="o">&amp;</span><span class="n">set</span><span class="p">,</span> <span class="k">const</span> <span class="n">dsk</span> <span class="o">*</span><span class="n">ke</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">visited</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">return</span><span class="p">;</span>
    <span class="n">visited</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">j</span><span class="o">:</span> <span class="p">(</span><span class="o">*</span><span class="n">ke</span><span class="p">)[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">visited</span><span class="p">,</span> <span class="n">set</span><span class="p">,</span> <span class="n">ke</span><span class="p">);</span>
        <span class="n">set</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">|=</span> <span class="n">set</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">compute</span><span class="p">(</span><span class="k">const</span> <span class="n">dsk</span> <span class="o">*</span><span class="n">ke</span><span class="p">,</span> <span class="n">bset</span> <span class="o">&amp;</span><span class="n">set</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">ke</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">();</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">visited</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">visited</span><span class="p">,</span> <span class="n">set</span><span class="p">,</span> <span class="n">ke</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">m</span><span class="p">,</span> <span class="n">n</span><span class="p">;</span> <span class="n">scanf</span><span class="p">(</span><span class="s">"%d%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">m</span><span class="p">);</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">edge</span><span class="o">&gt;</span> <span class="n">canh</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">m</span><span class="o">--</span><span class="p">)</span> <span class="n">scanf</span><span class="p">(</span><span class="s">"%d%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">canh</span><span class="p">[</span><span class="n">m</span><span class="p">].</span><span class="n">u</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">canh</span><span class="p">[</span><span class="n">m</span><span class="p">].</span><span class="n">v</span><span class="p">);</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">edge</span><span class="o">&gt;</span> <span class="n">query</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">Q</span><span class="p">;</span> <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Q</span><span class="p">);</span>
    <span class="n">query</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="n">Q</span><span class="p">);</span>
    <span class="n">canh</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="n">Q</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">Q</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">t</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
        <span class="n">scanf</span><span class="p">(</span><span class="s">"%d%d%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">t</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">t</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">n</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="n">canh</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span><span class="n">n</span><span class="p">,</span> <span class="n">a</span><span class="p">});</span>
            <span class="k">else</span> <span class="n">canh</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="p">});</span>
        <span class="p">}</span> <span class="k">else</span> <span class="n">query</span><span class="p">.</span><span class="n">push_back</span><span class="p">({</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">});</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span><span class="n">x</span><span class="o">:</span> <span class="n">canh</span><span class="p">)</span> <span class="n">x</span><span class="p">.</span><span class="n">u</span><span class="o">--</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">v</span><span class="o">--</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span><span class="n">x</span><span class="o">:</span> <span class="n">query</span><span class="p">)</span> <span class="n">x</span><span class="p">.</span><span class="n">u</span><span class="o">--</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">v</span><span class="o">--</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">map</span><span class="p">;</span>
    <span class="n">bset</span> <span class="n">set</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">ke</span> <span class="o">=</span> <span class="n">dag</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">canh</span><span class="p">),</span> <span class="n">n</span><span class="p">,</span> <span class="n">map</span><span class="p">,</span> <span class="n">set</span><span class="p">);</span>
    <span class="n">compute</span><span class="p">(</span><span class="n">ke</span><span class="p">,</span> <span class="n">set</span><span class="p">);</span>
    <span class="n">string</span> <span class="n">output</span><span class="p">;</span> <span class="n">output</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="n">query</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">*</span> <span class="mi">4</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span><span class="n">x</span><span class="o">:</span> <span class="n">query</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">map</span><span class="p">[</span><span class="n">x</span><span class="p">.</span><span class="n">u</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="n">map</span><span class="p">[</span><span class="n">x</span><span class="p">.</span><span class="n">v</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">set</span><span class="p">[</span><span class="n">a</span><span class="p">].</span><span class="n">test</span><span class="p">(</span><span class="n">b</span><span class="p">))</span> <span class="n">output</span> <span class="o">+=</span> <span class="s">"Yes</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">else</span> <span class="n">output</span> <span class="o">+=</span> <span class="s">"No</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%s"</span><span class="p">,</span> <span class="n">output</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>
    <span class="k">delete</span> <span class="n">ke</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

          </div>
</div>

      
        <div class="card window" id="origin.cpp">
  <div class="card-header window-header">
    <img class="btn-close" src="/img/close.svg"><img class="btn-minimize" src="/img/minimize.svg"><img class="btn-maximize" src="/img/maximize.svg">
    <span class="title">origin.cpp</span>
  </div>
  <div class="card-body window-body content">

          <a href="https://github.com/vietcodes/vietcodes.github.io/blob/master/code/4/origin.cpp">Open in Github <i class="fa fa-lg fa-github"></i></a>
          &bull;
          <a href="origin.cpp">Download <i class="fa fa-lg fa-download"></i></a>
          <div class="language-c++ selectable-code highlighter-rouge" contenteditable="true"><pre class="highlight"><code><span class="c1">// Problem setter's code
</span>
<span class="cp">#include &lt;bits/stdc++.h&gt;
#include &lt;stdio.h&gt;
#include &lt;cstdio&gt;
#define pb push_back
#define mp make_pair
#define sz(s) ((int)(s.size()))
#define all(s) s.begin(),s.end()
#define rep(i,a,n) for(int i=a;i&lt;=n;++i)
#define per(i,n,a) for(int i=n;i&gt;=a;--i)
#define dbg(x) cerr &lt;&lt; (#x) &lt;&lt; " --&gt; " &lt;&lt; (x) &lt;&lt; nxtl;
#define onlycin ios_base::sync_with_stdio(false); cin.tie(0) 
</span>
<span class="k">typedef</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ll</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">ull</span><span class="p">;</span>
<span class="k">typedef</span> <span class="kt">long</span> <span class="kt">double</span> <span class="n">ld</span><span class="p">;</span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">MAXN</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="mf">5e5</span><span class="o">+</span><span class="mi">228</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">char</span> <span class="n">nxtl</span> <span class="o">=</span> <span class="sc">'\n'</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">mod</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="mf">1e9</span><span class="o">+</span><span class="mi">7</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">eps</span> <span class="o">=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="mf">1e-9</span><span class="p">;</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> <span class="kr">inline</span> <span class="kt">bool</span> <span class="n">updmin</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span> <span class="o">?</span> <span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;}</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> <span class="kr">inline</span> <span class="kt">bool</span> <span class="n">updmax</span><span class="p">(</span><span class="n">T</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="n">T</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span> <span class="o">?</span> <span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;}</span>
<span class="cp">#define y1 qwert
#define y2 trewq
#define x1 asdfg
#define x2 gfdsa
#define left _left
#define right _right
</span>
<span class="n">bitset</span> <span class="o">&lt;</span><span class="mi">50005</span><span class="o">&gt;</span> <span class="n">dp</span><span class="p">[</span><span class="mi">50005</span><span class="p">];</span>
<span class="kt">bool</span> <span class="n">have</span><span class="p">[</span><span class="n">MAXN</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">;</span>
<span class="n">vector</span> <span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="n">g</span><span class="p">[</span><span class="n">MAXN</span><span class="p">],</span> <span class="n">gr</span><span class="p">[</span><span class="n">MAXN</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">type</span><span class="p">[</span><span class="n">MAXN</span><span class="p">],</span> <span class="n">from</span><span class="p">[</span><span class="n">MAXN</span><span class="p">],</span> <span class="n">go</span><span class="p">[</span><span class="n">MAXN</span><span class="p">],</span> <span class="n">sz</span><span class="p">,</span> <span class="n">wh</span><span class="p">[</span><span class="n">MAXN</span><span class="p">];</span>
<span class="n">vector</span> <span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="n">ts</span><span class="p">;</span>
<span class="kt">bool</span> <span class="n">used</span><span class="p">[</span><span class="n">MAXN</span><span class="p">];</span>
<span class="n">vector</span> <span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="n">cmps</span><span class="p">[</span><span class="n">MAXN</span><span class="p">];</span>
<span class="n">vector</span> <span class="o">&lt;</span> <span class="n">pair</span> <span class="o">&lt;</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">edge</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">used</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="n">to</span> <span class="o">:</span> <span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">used</span><span class="p">[</span><span class="n">to</span><span class="p">])</span>
        <span class="n">dfs</span><span class="p">(</span><span class="n">to</span><span class="p">);</span>
    <span class="n">ts</span><span class="p">.</span><span class="n">pb</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">dfs1</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">used</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">wh</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">sz</span><span class="p">;</span>
    <span class="n">cmps</span><span class="p">[</span><span class="n">sz</span><span class="p">].</span><span class="n">pb</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="n">to</span> <span class="o">:</span> <span class="n">gr</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">used</span><span class="p">[</span><span class="n">to</span><span class="p">])</span>
        <span class="n">dfs1</span><span class="p">(</span><span class="n">to</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">bool</span> <span class="n">res</span><span class="p">[</span><span class="n">MAXN</span><span class="p">];</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
<span class="cp">#ifdef accepted
</span>    <span class="n">freopen</span><span class="p">(</span><span class="s">".in"</span><span class="p">,</span> <span class="s">"r"</span><span class="p">,</span> <span class="n">stdin</span><span class="p">);</span>
    <span class="n">freopen</span><span class="p">(</span><span class="s">".out"</span><span class="p">,</span> <span class="s">"w"</span><span class="p">,</span> <span class="n">stdout</span><span class="p">);</span>
<span class="cp">#endif
</span>    <span class="n">onlycin</span><span class="p">;</span>
    <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">n</span> <span class="o">&gt;&gt;</span> <span class="n">m</span><span class="p">;</span>
    <span class="n">rep</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">m</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span> <span class="o">&gt;&gt;</span> <span class="n">y</span><span class="p">;</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">);</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">y</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">);</span>
        <span class="n">edge</span><span class="p">.</span><span class="n">pb</span><span class="p">(</span><span class="n">mp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">));</span>
        <span class="n">g</span><span class="p">[</span><span class="n">x</span><span class="p">].</span><span class="n">pb</span><span class="p">(</span><span class="n">y</span><span class="p">);</span>
        <span class="n">gr</span><span class="p">[</span><span class="n">y</span><span class="p">].</span><span class="n">pb</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">q</span><span class="p">;</span> <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">q</span><span class="p">;</span>
    <span class="n">rep</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">q</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">type</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">go</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="n">assert</span><span class="p">(</span><span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="n">type</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">n</span><span class="o">++</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">go</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
                <span class="n">edge</span><span class="p">.</span><span class="n">pb</span><span class="p">(</span><span class="n">mp</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
                <span class="n">g</span><span class="p">[</span><span class="n">n</span><span class="p">].</span><span class="n">pb</span><span class="p">(</span><span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                <span class="n">gr</span><span class="p">[</span><span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">]].</span><span class="n">pb</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">assert</span><span class="p">(</span><span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">);</span>
                <span class="n">edge</span><span class="p">.</span><span class="n">pb</span><span class="p">(</span><span class="n">mp</span><span class="p">(</span><span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">n</span><span class="p">));</span>
                <span class="n">g</span><span class="p">[</span><span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">]].</span><span class="n">pb</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
                <span class="n">gr</span><span class="p">[</span><span class="n">n</span><span class="p">].</span><span class="n">pb</span><span class="p">(</span><span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="n">assert</span><span class="p">(</span><span class="n">go</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">go</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">50000</span><span class="p">);</span>
    <span class="n">rep</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">used</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
    <span class="n">reverse</span><span class="p">(</span><span class="n">all</span><span class="p">(</span><span class="n">ts</span><span class="p">));</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">used</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="k">sizeof</span> <span class="n">used</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="n">to</span> <span class="o">:</span> <span class="n">ts</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">used</span><span class="p">[</span><span class="n">to</span><span class="p">])</span> <span class="p">{</span>
            <span class="n">sz</span><span class="o">++</span><span class="p">;</span>
            <span class="n">dfs1</span><span class="p">(</span><span class="n">to</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">rep</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">n</span><span class="p">)</span> <span class="n">g</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">clear</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="n">to</span> <span class="o">:</span> <span class="n">edge</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">wh</span><span class="p">[</span><span class="n">to</span><span class="p">.</span><span class="n">first</span><span class="p">]</span> <span class="o">!=</span> <span class="n">wh</span><span class="p">[</span><span class="n">to</span><span class="p">.</span><span class="n">second</span><span class="p">])</span> <span class="n">g</span><span class="p">[</span><span class="n">wh</span><span class="p">[</span><span class="n">to</span><span class="p">.</span><span class="n">first</span><span class="p">]].</span><span class="n">pb</span><span class="p">(</span><span class="n">wh</span><span class="p">[</span><span class="n">to</span><span class="p">.</span><span class="n">second</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="n">memset</span><span class="p">(</span><span class="n">used</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="k">sizeof</span> <span class="n">used</span><span class="p">);</span>
    <span class="n">rep</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">sz</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">used</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
            <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="n">to</span> <span class="o">:</span> <span class="n">ts</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">dp</span><span class="p">[</span><span class="n">to</span><span class="p">].</span><span class="n">set</span><span class="p">(</span><span class="n">to</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span><span class="n">it</span> <span class="o">:</span> <span class="n">g</span><span class="p">[</span><span class="n">to</span><span class="p">])</span> <span class="n">dp</span><span class="p">[</span><span class="n">to</span><span class="p">]</span> <span class="o">|=</span> <span class="n">dp</span><span class="p">[</span><span class="n">it</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="n">per</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">q</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">type</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">n</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">go</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">n</span> <span class="o">||</span> <span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
            <span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">dp</span><span class="p">[</span><span class="n">wh</span><span class="p">[</span><span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">]]].</span><span class="n">test</span><span class="p">(</span><span class="n">wh</span><span class="p">[</span><span class="n">go</span><span class="p">[</span><span class="n">i</span><span class="p">]]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">rep</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">q</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">type</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Yes</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">else</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"No</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

          </div>
</div>

      

      <button onclick="loadComments()" class="btn btn-lg btn-success btn-block btn-load-cmt" id="btn-load-cmt">Load comments</button>
<div class="hide" id="disqus-window">
  <div class="card window" id="">
  <div class="card-header window-header">
    <img class="btn-close" src="/img/close.svg"><img class="btn-minimize" src="/img/minimize.svg"><img class="btn-maximize" src="/img/maximize.svg">
    <span class="title">Comments</span>
  </div>
  <div class="card-body window-body content">

  <div id="disqus_thread"></div>
    </div>
</div>

</div>

<script>
var disqus_config = function () {
    this.page.url = "https://vietcodes.github.io/code/4/";
    this.page.identifier = "https://vietcodes.github.io/code/4/";
};
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </div>
  </div>
</div>

<script src="/js/codeview.js"></script>

    <footer class="page-footer">
    <div class="footer-copyright">
        <div class="container-fluid">
            &copy; 2017 VietCodes
        </div>
    </div>
</footer>

    <script src="/js/all.js"></script>
  </body>
</html>
