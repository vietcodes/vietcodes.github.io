<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title> VOI 2015 REFORM - Kế hoạch cải tổ - VietCodes </title>
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu+Mono">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/all.css">
    
    <!--script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-2911647956237293",
    enable_page_level_ads: true
  });
</script-->

    
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML' defer></script>

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112397632-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-112397632-1');
    </script>
  </head>
  <body>
    <p class="brand">
<span class="keyword">let</span> menu <span class="op">=</span>
[<span class="string">"<a href="/">Home</a>"</span>,
<span class="string">"<a href="/algorithms">Algorithms</a>"</span>,
<span class="string">"<a href="/codehub">CodeHub</a>"</span>,
<span class="string">"<a href="/tools">Tools</a>"</span>];
</p>

    <div class="container">
  <div class="row">
    <div class="col-md-12" style="padding: 1px">
      <div class="card window" id="overview">
  <div class="card-header window-header">
    <img class="btn-close" src="/img/close.svg"><img class="btn-minimize" src="/img/minimize.svg"><img class="btn-maximize" src="/img/maximize.svg">
    <span class="title">Overview</span>
  </div>
  <div class="card-body window-body content">

        <h3 id="voi-2015-reform---kế-hoạch-cải-tổ">VOI 2015 REFORM - Kế hoạch cải tổ</h3>
<ul>
  <li>Đề bài: <a href="http://vnoi.info/problems/REFORM" target="blank">http://vnoi.info/problems/REFORM</a></li>
  <li>Keywords: bridge, dfs, graph</li>
  <li>Tài liệu: <a href="https://en.wikipedia.org/wiki/Bridge_(graph_theory)#Tarjan.27s_Bridge-finding_algorithm" target="blank">https://en.wikipedia.org/wiki/Bridge_(graph_theory)#Tarjan.27s_Bridge-finding_algorithm</a></li>
  <li>Ngôn ngữ: C++11</li>
</ul>

        </div>
</div>


      
        <div class="card window" id="solution.md">
  <div class="card-header window-header">
    <img class="btn-close" src="/img/close.svg"><img class="btn-minimize" src="/img/minimize.svg"><img class="btn-maximize" src="/img/maximize.svg">
    <span class="title">solution.md</span>
  </div>
  <div class="card-body window-body content">

          <p>Đề trên SPOJ bị thiếu, bài này có giới hạn <script type="math/tex">n \leq 10^5, m \leq 2\times10^5</script>.</p>

<p>Ta có thể phát biểu bài toán dưới dạng đồ thị như sau:</p>

<p>Cho Một đồ thị vô hướng với n đỉnh và m cạnh, mục tiêu của ta là đếm số
cách khác nhau để thực hiện 2 bước sau:</p>

<ul>
  <li>Loại bỏ một cạnh trong m cạnh của đồ thị</li>
  <li>Thêm một cạnh mới vào đồ thị (cạnh này phải khác m cạnh lúc đầu) sao cho
đồ thị mới đảm bảo tính liên thông.</li>
</ul>

<p>Ta có nhận xét là do chỉ có thể thêm một cạnh vào đồ thị, do đó số lượng
thành phần liên thông của đồ thị chỉ có thể tối đa là 2. Ta sẽ chia bài
toán làm 2 trường hợp: Đồ thị gồm 1 thành phần liên thông và đồ thị gồm
2 thành phần liên thông.</p>

<h3 id="trường-hợp-thứ-nhất---trường-hợp-đơn-giản-hơn-đồ-thị-gồm-2-thành-phần-liên-thông">Trường hợp thứ nhất - trường hợp đơn giản hơn: Đồ thị gồm 2 thành phần liên thông</h3>

<p>Giả sử 2 thành phần liên thông của đồ thị có số đỉnh lần lượt là C1 và C2
(tất nhiên C1 = n - C2). Do đồ thị có 2 thành phần liên thông, cạnh ta
thêm vào phải là cạnh từ thành phần liên thông này sang thành phần liên
thông kia, có nghĩa là có C1 * C2 cách thêm cạnh, và các cạnh này chắc
chắn khác với m cạnh lúc đầu. Tuy nhiên ta có thêm nhận xét là cạnh bị
loại đi không được phép là cầu. Từ đó, giả sử số cầu của đồ thị là c,
kết quả của ta là (m-c) * C1 * C2.</p>

<h3 id="trường-hợp-thứ-hai-đồ-thị-có-duy-nhất-một-thành-phần-liên-thông">Trường hợp thứ hai: Đồ thị có duy nhất một thành phần liên thông</h3>

<p>Cố định cạnh bỏ đi (xét từng cạnh trong m cạnh của đồ t), ta sẽ chia bài
toán làm 2 trường hợp:</p>

<p>Trường hợp đầu tiên: cạnh bỏ đi không phải là cầu, khi đó đồ thị vẫn tiếp
tục liên thông. Tức là ta có thể thêm bất cứ cạnh nào miễn sau cạnh đó khác
m cạnh lúc đầu là được, như vậy lúc này ta có <script type="math/tex">n(n-1) / 2 - m</script> cách thêm
cạnh mới.</p>

<p>Trường hợp thứ hai: cạnh bỏ đi là cầu, khi đó đồ thị sẽ bị chia làm 2 thành
phần liên thông, và cạnh thêm vào chắc chắn phải nối một đỉnh từ thành phần
liên thông này sang đỉnh thuộc thành phần liên thông kia (để đảm bảo tính
chất liên thông của đồ thị). Gọi C1 và C2 là số lượng đỉnh trong 2 thành
phần liên thông sau khi bỏ đi cạnh đang xét, ta sẽ có C1 * C2 - 1 cách thêm
cạnh mới vào (-1 do trong C1 * C2 cạnh thì có một cạnh trùng với cạnh vừa bỏ
đi).</p>

<p>Lấy tổng số cách trong các trường hợp, ta thu được kết quả của bài toán.</p>

<p>Độ phức tạp: O(m + n)</p>

<p>Nguồn: Tạp chí tin học và nhà trường</p>

          </div>
</div>

      

      
        <div class="card window" id="main.cpp">
  <div class="card-header window-header">
    <img class="btn-close" src="/img/close.svg"><img class="btn-minimize" src="/img/minimize.svg"><img class="btn-maximize" src="/img/maximize.svg">
    <span class="title">main.cpp</span>
  </div>
  <div class="card-body window-body content">

          <a href="https://github.com/vietcodes/vietcodes.github.io/blob/master/code/44/main.cpp">Open in Github <i class="fa fa-lg fa-github"></i></a>
          &bull;
          <a href="main.cpp">Download <i class="fa fa-lg fa-download"></i></a>
          <div class="language-c++ selectable-code highlighter-rouge" contenteditable="true"><pre class="highlight"><code><span class="cp">#include &lt;cstdio&gt;
#include &lt;vector&gt;
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
<span class="cp">#define LL long long
</span>
<span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ke</span><span class="p">[</span><span class="mi">100000</span><span class="p">];</span>

<span class="kt">void</span> <span class="nf">dfs</span><span class="p">(</span><span class="kt">int</span> <span class="n">u</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">visited</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">visited</span><span class="p">[</span><span class="n">u</span><span class="p">]</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">v</span><span class="o">:</span> <span class="n">ke</span><span class="p">[</span><span class="n">u</span><span class="p">])</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">visited</span><span class="p">[</span><span class="n">v</span><span class="p">])</span> <span class="n">dfs</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">visited</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">count_ccs</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">v</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">dfs</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">v</span><span class="p">),</span> <span class="n">c</span><span class="o">++</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">c</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">dfs1</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">idx</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">low</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">trace</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">index</span><span class="p">,</span> <span class="n">LL</span> <span class="o">&amp;</span><span class="n">res</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">nBridge</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">nChild</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">idx</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">:</span> <span class="n">ke</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">idx</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
            <span class="n">trace</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">nChildJ</span> <span class="o">=</span> <span class="n">dfs1</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">trace</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">nBridge</span><span class="p">);</span>
            <span class="n">nChild</span> <span class="o">+=</span> <span class="n">nChildJ</span><span class="p">;</span>
            <span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">low</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">low</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">idx</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
                <span class="n">nBridge</span><span class="o">++</span><span class="p">;</span>
                <span class="n">res</span> <span class="o">+=</span> <span class="p">(</span><span class="n">LL</span><span class="p">)</span><span class="n">nChildJ</span> <span class="o">*</span> <span class="p">(</span><span class="n">LL</span><span class="p">)(</span><span class="n">n</span><span class="o">-</span><span class="n">nChildJ</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1ll</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">!=</span> <span class="n">trace</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">idx</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">nChild</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">solve1</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nBridge</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">LL</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">idx</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">low</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">trace</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">dfs1</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">trace</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">nBridge</span><span class="p">);</span>
    <span class="n">res</span> <span class="o">+=</span> <span class="p">(</span><span class="n">LL</span><span class="p">)(</span><span class="n">m</span><span class="o">-</span><span class="n">nBridge</span><span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">LL</span><span class="p">)</span><span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="n">LL</span><span class="p">)(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2ll</span> <span class="o">-</span> <span class="p">(</span><span class="n">LL</span><span class="p">)</span><span class="n">m</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%lld"</span><span class="p">,</span> <span class="n">res</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">dfs2</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">idx</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">low</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&amp;</span><span class="n">trace</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">index</span><span class="p">,</span> <span class="kt">int</span> <span class="o">&amp;</span><span class="n">num_bridge</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">idx</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">:</span> <span class="n">ke</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">idx</span><span class="p">[</span><span class="n">j</span><span class="p">])</span> <span class="p">{</span>
            <span class="n">trace</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
            <span class="n">dfs2</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">trace</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">num_bridge</span><span class="p">);</span>
            <span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">low</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">low</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">idx</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">num_bridge</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">!=</span> <span class="n">trace</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">low</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">idx</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">solve2</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nBridge</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">idx</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">low</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">trace</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">dfs2</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">trace</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">nBridge</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">index</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">idx</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="n">dfs2</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">trace</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">nBridge</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">LL</span> <span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="n">LL</span><span class="p">)(</span><span class="n">m</span><span class="o">-</span><span class="n">nBridge</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">LL</span><span class="p">)</span><span class="n">c1</span> <span class="o">*</span> <span class="p">(</span><span class="n">LL</span><span class="p">)(</span><span class="n">n</span><span class="o">-</span><span class="n">c1</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%lld"</span><span class="p">,</span> <span class="n">res</span><span class="p">);</span>
<span class="p">}</span>


<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%d%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">m</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">m</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">;</span>
        <span class="n">scanf</span><span class="p">(</span><span class="s">"%d%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">u</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">v</span><span class="p">);</span>
        <span class="n">u</span><span class="o">--</span><span class="p">,</span> <span class="n">v</span><span class="o">--</span><span class="p">;</span>
        <span class="n">ke</span><span class="p">[</span><span class="n">u</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
        <span class="n">ke</span><span class="p">[</span><span class="n">v</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">u</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">int</span> <span class="n">num_ccs</span> <span class="o">=</span> <span class="n">count_ccs</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">num_ccs</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="n">printf</span><span class="p">(</span><span class="s">"0"</span><span class="p">);</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">num_ccs</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="n">solve2</span><span class="p">();</span>
    <span class="k">else</span> <span class="n">solve1</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

          </div>
</div>

      

      <button onclick="loadComments()" class="btn btn-lg btn-success btn-block btn-load-cmt" id="btn-load-cmt">Load comments</button>
<div class="hide" id="disqus-window">
  <div class="card window" id="">
  <div class="card-header window-header">
    <img class="btn-close" src="/img/close.svg"><img class="btn-minimize" src="/img/minimize.svg"><img class="btn-maximize" src="/img/maximize.svg">
    <span class="title">Comments</span>
  </div>
  <div class="card-body window-body content">

  <div id="disqus_thread"></div>
    </div>
</div>

</div>

<script>
var disqus_config = function () {
    this.page.url = "https://vietcodes.github.io/code/44/";
    this.page.identifier = "https://vietcodes.github.io/code/44/";
};
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

    </div>
  </div>
</div>

<script src="/js/codeview.js"></script>

    <footer class="page-footer">
    <div class="footer-copyright">
        <div class="container-fluid">
            &copy; 2017 VietCodes
        </div>
    </div>
</footer>

    <script src="/js/all.js"></script>
  </body>
</html>
